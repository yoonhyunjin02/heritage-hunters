<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <th:block th:insert="~{fragments/head :: common-head('Leaderboard')}"></th:block>
  <link rel="stylesheet" th:href="@{/features/leaderboard/css/leaderboard.css}">
</head>
<body class="leaderboard-page">
<!--header-->
<div th:replace="~{fragments/header :: common-header}"></div>

<!--main-->
<main class="main-container">
  <!-- 현재 로그인한 유저 -->
  <section class="user-topbar" th:if="${currentUser != null}">
    <div class="topbar-content">
      <a th:href="@{/profile}" class="left-info" aria-label="내 프로필로 이동">
        <img th:src="${currentUser.profileImage}" alt="profile" class="profile-img"/>
        <span class="nickname" th:text="${currentUser.nickname}">닉네임</span>
      </a>

      <div class="right-info">
        <span class="score" th:text="${currentUser.score}">0</span>
        <span class="rank">| <span th:text="${currentUser.rank}">01</span>등</span>
      </div>
    </div>
  </section>

  <div class="leaderboard-background">
    <section class="leaderboard">
      <div th:each="user, iterStat : ${users}" class="rank-item">
        <div class="rank-circle">
          <a th:if="${currentUser != null and user.id == currentUser.id}"
             th:href="@{/profile}">
            <span th:text="${#numbers.formatInteger(iterStat.index + 1, 2)}">01</span>
          </a>
          <a th:if="${currentUser == null or user.id != currentUser.id}"
             th:href="@{/profile/{id}(id=${user.id})}">
            <span th:text="${#numbers.formatInteger(iterStat.index + 1, 2)}">01</span>
          </a>
        </div>

        <a th:href="@{/profile/{id}(id=${user.id})}"
           th:class="'user-box ' + (${iterStat.index % 2 == 0} ? 'right' : 'left')">
          <img th:src="${user.profileImage}" alt="profile" class="profile-img"/>
          <span class="nickname" th:text="${user.nickname}">닉네임</span>
          <span class="score" th:text="${user.score}">0</span>
        </a>
      </div>
    </section>
  </div>
</main>

<!--footer-->
<div th:replace="~{fragments/footer :: common-footer}"></div>
</body>
</html>