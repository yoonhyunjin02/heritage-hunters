<div th:fragment="common-header">
  <header class="header">
    <div class="header-wrapper">
      <div class="header-container">

        <!-- ๋ก๊ณ ํญ์ ํ์ -->
        <h1 class="logo">
          <a th:href="@{/main}">
            <img th:src="@{/images/logo/github.svg}" alt="๋ก๊ณ" class="logo-image">
          </a>
        </h1>

        <!-- ๋ก๊ทธ์ธ O -->
        <div class="header-user">
          <div sec:authorize="isAuthenticated()" th:if="${currentUser != null}" class="user-dropdown">
            <div class="user-welcome" onclick="toggleDropdown(event)">
              <span class="welcome-text">์ด์์ค์ธ์</span>
              <span class="user-name" th:text="${currentUser.nickname} ?: '์ฌ์ฉ์'">๋๋ค์</span>
              <span class="welcome-text">๋</span>
              <svg width="12" height="12" viewBox="0 0 12 12" fill="none" class="dropdown-arrow">
                <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <img
                  class="profile-image"
                  th:src="${#strings.isEmpty(currentUser.profileImage)} ? @{/images/auth-bg1.jpg} : ${currentUser.profileImage}"
                  alt="ํ๋กํ ์ด๋ฏธ์ง"
              />
            </div>
            <div class="dropdown-menu">
              <a th:href="@{/profile}" class="dropdown-item">๐ค ํ๋กํ</a>
              <hr class="dropdown-divider">
              <form class="dropdown-logout-form" th:action="@{/logout}" method="post">
                <button type="submit" class="dropdown-item logout-item">๐ช ๋ก๊ทธ์์</button>
              </form>
            </div>
          </div>

          <!-- ๋ก๊ทธ์ธ X -->
          <div sec:authorize="isAnonymous()">
            <a th:href="@{/login}" class="login-button">๋ก๊ทธ์ธ</a>
          </div>
        </div>
      </div>
    </div>
  </header>
</div>